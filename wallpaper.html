<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text to Wallpaper Maker</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Lobster&family=Montserrat:wght@300;400;700&family=Poppins:wght@300;400;500&family=Playfair+Display:wght@400;700&family=Raleway:wght@300;400;700&family=Oswald:wght@300;400;700&family=Open+Sans:wght@300;400;600&family=Nunito:wght@300;400;700&family=Merriweather:wght@300;400;700&family=Pacifico&family=Ubuntu:wght@300;400;700&family=Quicksand:wght@300;400;600&family=DM+Serif+Display&family=Anton&family=Bebas+Neue&family=Kanit:wght@300;400;700&family=Indie+Flower&family=Cabin:wght@400;700&family=Fira+Sans:wght@300;400;600&family=Josefin+Sans:wght@300;400;700&family=Inconsolata:wght@300;400;700&family=Raleway+Dots&family=Zilla+Slab:wght@300;400;700&family=Cinzel:wght@400;700&family=Exo+2:wght@300;400;700&family=Rubik:wght@300;400;700&family=Overpass:wght@300;400;700&family=Space+Mono:wght@400;700&family=Arvo:wght@400;700&family=Vollkorn:wght@400;700&family=Work+Sans:wght@300;400;700&family=Lora:wght@400;700&family=Slabo+27px&family=PT+Sans:wght@300;400;700&Alfa+Slab+One&family=Amatic+SC:wght@400;700&family=Architects+Daughter&family=Bangers&family=Caveat:wght@400;700&family=Chewy&family=Cinzel:wght@400;700&family=Courgette&family=Crete+Round:wght@400;700&family=Great+Vibes&family=Indie+Flower&family=Luckiest+Guy&family=Permanent+Marker&family=Playball&family=Poiret+One&family=Quicksand:wght@400;600&family=Righteous&family=Shadows+Into+Light&family=Special+Elite&family=VT323&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    /* Global Styles */
    body {
      margin: 0;
      padding: 0;
      font-family: "Arial", sans-serif;
      background-color: #f8f8f8;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    header {
      text-align: center;
      padding: 10px;
      background: linear-gradient(90deg, #4facfe, #00f2fe);
      color: #fff;
      font-size: 1.2rem;
    }

    header p {
      font-size: 1rem;
      font-weight: 300;
    }

    /* Main content */
    main {
      display: flex;
      padding: 30px;
      gap: 30px;
    }

    /* Controls Section */
    .controls {
      flex: 1;
      background-color: #fafafa;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .controls .form-group {
      margin-bottom: 25px;
    }

    .controls label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: #333;
    }

    .controls input[type="text"],
    .controls textarea,
    .controls input[type="number"],
    .controls select,
    .controls input[type="color"] {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      margin-bottom: 15px;
      background-color: #fff;
      box-sizing: border-box;
    }

    .controls textarea {
      resize: vertical;
      min-height: 100px;
    }

    .controls button {
      padding: 12px 25px;
      font-size: 16px;
      background-color: #4facfe;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      width: 100%;
      margin-top: 10px;
    }

    .controls button:hover {
      background-color: #00f2fe;
      transform: scale(1.05);
    }

    .controls button:disabled {
      background-color: #d3d3d3;
      cursor: not-allowed;
    }

    .controls input[type="color"] {
      padding: 0;
      height: 50px;
      border-radius: 8px;
    }

    /* Preview Section */
    .preview {
      flex: 2;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #f7f7f7;
      padding: 20px;
      border-radius: 8px;
    }

    canvas {
      width: 100%;
      max-width: 600px;
      height: auto;
      border-radius: 10px;
      background-color: #000;
      border: 2px solid #ddd;
    }

    /* Responsiveness */
    @media (max-width: 768px) {
      main {
        flex-direction: column;
        padding: 20px;
      }

      .controls {
        margin-bottom: 20px;
      }

      .preview {
        margin-top: 20px;
      }
    }
  </style>

  <body>
    <div class="container">
      <header>
        <h1>Wallpaper Maker</h1>
        <p>Create stunning wallpapers with text</p>
      </header>
      <main>
        <div class="preview">
          <canvas id="wallpaperCanvas" width="1024" height="768"></canvas>
        </div>

        <div class="controls">
          <div class="form-group">
            <label for="wallpaperText">Enter Text:</label>
            <textarea id="wallpaperText" placeholder="Your custom text">
PREVIEW SCREEN</textarea
            >
          </div>

          <div class="form-group">
            <label for="textColor">Text Color:</label>
            <input type="color" id="textColor" value="#ffffff" />
          </div>

          <div class="form-group">
            <label for="bgType">Background Type:</label>
            <select id="bgType">
              <option value="solid">Solid Color</option>
              <option value="gradient">Gradient</option>
            </select>
          </div>

          <div class="form-group" id="solidColorGroup">
            <label for="bgColor">Background Color:</label>
            <input type="color" id="bgColor" value="#000000" />
          </div>

          <div class="form-group" id="gradientGroup" style="display: none">
            <label for="gradientType">Gradient Type:</label>
            <select id="gradientType">
              <option value="linear">Linear</option>
              <option value="radial">Radial</option>
            </select>

            <div id="linearGradientGroup">
              <label for="gradientDirection"
                >Gradient Direction (in degrees):</label
              >
              <input
                type="number"
                id="gradientDirection"
                value="0"
                min="0"
                max="360"
              />
            </div>

            <label for="gradientStart">Start Color:</label>
            <input type="color" id="gradientStart" value="#ff0000" />
            <label for="gradientEnd">End Color:</label>
            <input type="color" id="gradientEnd" value="#0000ff" />
          </div>

          <div class="form-group">
            <label for="textDecoration">Text Decoration:</label>
            <select id="textDecoration">
              <option value="none">None</option>
              <option value="bold">Bold</option>
              <option value="underline">Underline</option>
              <option value="italic">Italic</option>
              <option value="bold underline">Bold & Underline</option>
              <option value="bold italic">Bold & Italic</option>
              <option value="underline italic">Underline & Italic</option>
              <option value="bold underline italic">
                Bold, Underline & Italic
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="fontSelect">Font Style:</label>
            <select id="fontSelect">
              <option value="Arial">Arial</option>
              <option value="Georgia">Georgia</option>
              <option value="Courier New">Courier New</option>
              <option value="Times New Roman">Times New Roman</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Lobster', cursive">Lobster</option>
              <option value="'Montserrat', sans-serif">Montserrat</option>
              <option value="'Poppins', sans-serif">Poppins</option>
              <option value="'Playfair Display', serif">
                Playfair Display
              </option>
              <option value="'Raleway', sans-serif">Raleway</option>
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Open Sans', sans-serif">Open Sans</option>
              <option value="'Nunito', sans-serif">Nunito</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'Pacifico', cursive">Pacifico</option>
              <option value="'Ubuntu', sans-serif">Ubuntu</option>
              <option value="'Quicksand', sans-serif">Quicksand</option>
              <option value="'DM Serif Display', serif">
                DM Serif Display
              </option>
              <option value="'Anton', sans-serif">Anton</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Kanit', sans-serif">Kanit</option>
              <option value="'Indie Flower', cursive">Indie Flower</option>
              <option value="'Cabin', sans-serif">Cabin</option>
              <option value="'Fira Sans', sans-serif">Fira Sans</option>
              <option value="'Josefin Sans', sans-serif">Josefin Sans</option>
              <option value="'Inconsolata', monospace">Inconsolata</option>
              <option value="'Raleway Dots', cursive">Raleway Dots</option>
              <option value="'Zilla Slab', serif">Zilla Slab</option>
              <option value="'Cinzel', serif">Cinzel</option>
              <option value="'Exo 2', sans-serif">Exo 2</option>
              <option value="'Rubik', sans-serif">Rubik</option>
              <option value="'Overpass', sans-serif">Overpass</option>
              <option value="'Space Mono', monospace">Space Mono</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Vollkorn', serif">Vollkorn</option>
              <option value="'Work Sans', sans-serif">Work Sans</option>
              <option value="'Lora', serif">Lora</option>
              <option value="'Slabo 27px', serif">Slabo 27px</option>
              <option value="'PT Sans', sans-serif">PT Sans</option>
              <option value="'Alfa Slab One', cursive">Alfa Slab One</option>
              <option value="'Amatic SC', cursive">Amatic SC</option>
              <option value="'Architects Daughter', cursive">
                Architects Daughter
              </option>
              <option value="'Bangers', cursive">Bangers</option>
              <option value="'Caveat', cursive">Caveat</option>
              <option value="'Chewy', cursive">Chewy</option>
              <option value="'Cinzel', serif">Cinzel</option>
              <option value="'Courgette', cursive">Courgette</option>
              <option value="'Crete Round', serif">Crete Round</option>
              <option value="'Great Vibes', cursive">Great Vibes</option>
              <option value="'Indie Flower', cursive">Indie Flower</option>
              <option value="'Luckiest Guy', cursive">Luckiest Guy</option>
              <option value="'Permanent Marker', cursive">
                Permanent Marker
              </option>
              <option value="'Playball', cursive">Playball</option>
              <option value="'Poiret One', cursive">Poiret One</option>
              <option value="'Quicksand', sans-serif">Quicksand</option>
              <option value="'Righteous', cursive">Righteous</option>
              <option value="'Shadows Into Light', cursive">
                Shadows Into Light
              </option>
              <option value="'Special Elite', cursive">Special Elite</option>
              <option value="'VT323', monospace">VT323</option>
            </select>
          </div>

          <div class="form-group">
            <label for="fontSize">Font Size:</label>
            <input type="number" id="fontSize" min="10" max="100" value="80" />
          </div>

          <button id="generateBtn">Generate Wallpaper</button>
          <button id="downloadBtn" disabled>Download as PNG</button>
        </div>
      </main>
    </div>

    <script>
      const canvas = document.getElementById("wallpaperCanvas");
      const ctx = canvas.getContext("2d");

      // Set the desired resolution for the canvas
      canvas.width = 1080; // Width in pixels
      canvas.height = 2255; // Height in pixels
      const wallpaperText = document.getElementById("wallpaperText");
      const textColor = document.getElementById("textColor");
      const bgColor = document.getElementById("bgColor");
      const fontSelect = document.getElementById("fontSelect");
      const fontSize = document.getElementById("fontSize");
      const generateBtn = document.getElementById("generateBtn");
      const downloadBtn = document.getElementById("downloadBtn");
      const textDecorationSelect = document.getElementById("textDecoration");
      const bgType = document.getElementById("bgType");
      const solidColorGroup = document.getElementById("solidColorGroup");
      const gradientGroup = document.getElementById("gradientGroup");
      const gradientType = document.getElementById("gradientType");
      const gradientStart = document.getElementById("gradientStart");
      const gradientEnd = document.getElementById("gradientEnd");
      const gradientDirection = document.getElementById("gradientDirection");

      // Function to wrap text within a specified width (and handle user-entered line breaks)
      function wrapText(text, font, maxWidth) {
        const lines = text.split("\n"); // Split based on new lines from the user input
        const wrappedLines = [];

        lines.forEach((line) => {
          const words = line.split(" ");
          let currentLine = "";
          words.forEach((word) => {
            const testLine = currentLine + word + " ";
            const testWidth = ctx.measureText(testLine).width;
            if (testWidth > maxWidth && currentLine.length > 0) {
              wrappedLines.push(currentLine);
              currentLine = word + " ";
            } else {
              currentLine = testLine;
            }
          });
          wrappedLines.push(currentLine); // Push the last line
        });

        return wrappedLines;
      }

      // Function to render wallpaper on canvas
      function renderWallpaper() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Set background color or gradient
        if (bgType.value === "solid") {
          ctx.fillStyle = bgColor.value;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        } else if (bgType.value === "gradient") {
          let gradient;
          if (gradientType.value === "linear") {
            document.getElementById("linearGradientGroup").style.display =
              "block";
            const direction = parseInt(gradientDirection.value) || 0;
            const radian = (Math.PI / 180) * direction; // Convert degree to radians
            const x1 = canvas.width / 2 + Math.cos(radian) * canvas.width;
            const y1 = canvas.height / 2 + Math.sin(radian) * canvas.height;
            const x2 = canvas.width / 2 - Math.cos(radian) * canvas.width;
            const y2 = canvas.height / 2 - Math.sin(radian) * canvas.height;

            gradient = ctx.createLinearGradient(x1, y1, x2, y2);
          } else if (gradientType.value === "radial") {
            document.getElementById("linearGradientGroup").style.display =
              "none";
            gradient = ctx.createRadialGradient(
              canvas.width / 2,
              canvas.height / 2,
              canvas.width / 4,
              canvas.width / 2,
              canvas.height / 2,
              canvas.width / 2
            );
          }
          gradient.addColorStop(0, gradientStart.value);
          gradient.addColorStop(1, gradientEnd.value);

          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Set text properties with decoration
        let fontStyle = `${fontSize.value}px ${fontSelect.value}`;
        const decoration = textDecorationSelect.value;

        if (decoration.includes("bold")) {
          fontStyle = `bold ${fontStyle}`;
        }
        if (decoration.includes("italic")) {
          fontStyle = `italic ${fontStyle}`;
        }

        ctx.fillStyle = textColor.value;
        ctx.font = fontStyle;
        ctx.textAlign = "center";
        ctx.textBaseline = "top";

        // Draw wrapped text on canvas
        const text = wallpaperText.value;
        const lines = wrapText(text, fontStyle, canvas.width - 40);
        const lineHeight = fontSize.value * 1.2;
        const startY = (canvas.height - lines.length * lineHeight) / 2;

        lines.forEach((line, index) => {
          ctx.fillText(line, canvas.width / 2, startY + index * lineHeight);
          if (decoration.includes("underline")) {
            const metrics = ctx.measureText(line);
            const lineX = canvas.width / 2 - metrics.width / 2; // Calculate x position for underline
            const lineY =
              startY + index * lineHeight + parseInt(fontSize.value) * 0.9; // Calculate y position for underline

            ctx.beginPath();
            ctx.lineWidth = 2; // Set underline thickness
            ctx.strokeStyle = textColor.value;
            ctx.moveTo(lineX, lineY);
            ctx.lineTo(lineX + metrics.width, lineY);
            ctx.stroke();
          }
        });
      }

      // Event Listeners
      generateBtn.addEventListener("click", () => {
        renderWallpaper();
        downloadBtn.disabled = false; // Enable the download button
      });

      downloadBtn.addEventListener("click", () => {
        const link = document.createElement("a");
        link.download = "wallpaper.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });

      // Show/Hide controls based on background type selection
      bgType.addEventListener("change", () => {
        if (bgType.value === "solid") {
          solidColorGroup.style.display = "block";
          gradientGroup.style.display = "none";
        } else {
          solidColorGroup.style.display = "none";
          gradientGroup.style.display = "block";
        }
        renderWallpaper();
      });

      [
        wallpaperText,
        textColor,
        bgType,
        bgColor,
        fontSelect,
        fontSize,
        textDecorationSelect,
        gradientStart,
        gradientEnd,
        gradientDirection,
        gradientType,
      ].forEach((input) => {
        input.addEventListener("input", renderWallpaper);
      });

      // Explicit listener for font changes (change events for dropdowns)
      fontSelect.addEventListener("change", renderWallpaper);
      fontSize.addEventListener("input", renderWallpaper);
      // Initial render
      renderWallpaper();
    </script>
  </body>
</html>
